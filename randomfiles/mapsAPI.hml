<html>
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8"/> 

<style>
  body { font-family: Arial, sans-serif; }
  #map_canvas { height: 500px; width:600px; }
</style>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>

<script type="text/javascript" id="script">

var tableid = 2008382; 
var layer = new google.maps.FusionTablesLayer(tableid);

function initialize() {
  map = new google.maps.Map(document.getElementById('map_canvas'), {
    center: new google.maps.LatLng(-15, -52),
    zoom: 4,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });
  layer.setQuery("SELECT 'Localização' from " + tableid)
  layer.setMap(map);
}

// Change the query based on the user's selection
function changeMap(val) {
  if(val == 1) {
    layer.setQuery("SELECT 'Localização' from " + tableid);
  } else {
    layer.setQuery("SELECT 'Localização' from " + tableid + " WHERE 'Estado' = 'São Paulo'");
  }
}

</script>
</head>
<body onload="initialize();">
Estado: <select onchange="changeMap(this.value);">
  <option value=1>Todos</option>
  <option value=0>São Paulo</option>
</select>

<div id="map_canvas"></div>
</body>
</html>